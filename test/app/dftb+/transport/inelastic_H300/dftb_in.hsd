Geometry = GenFormat {
<<< 'H300.gen'
}

 Transport{
   Device{
     AtomRange = 1 300
     FirstLayerAtoms = 1 7 13 19 25 31 37 43 49 55 61 67 73 79 85 91 97 103 109 115 121 127 133 139 145 151 157 163 169 175 181 187 193 199 205 211 217 223 229 235 241 247 253 259 265 271 277 283 289 295
   }
   Contact{
     Id = "source"
     AtomRange = 301 310
     FermiLevel =  -0.235474745317908463
     Temperature = 0.0
     Potential [eV] = -0.1
   }
   Contact{
     Id = "drain"
     AtomRange = 311 320
     FermiLevel =  -0.235474745317908463
     Temperature = 0.0
     Potential [eV] = +0.1
   }
   Task = UploadContacts{}
   readBinaryContact = No
 }

Hamiltonian = DFTB {
  SCC =Yes
  MaxSCCIterations = 1 
  #ReadInitialCharges = Yes
  #SCCTolerance = 1e-8
  ConvergentSCCOnly = No

  MaxAngularMomentum = {
    H = "s"
  }
  Electrostatics = Poisson {
    Poissonbox [Angstrom] = 10.0 10.0 1000.0
  }
  SlaterKosterFiles = Type2FileNames {
    Prefix = "slakos/origin/mio-1-1/"
    Separator = "-"
    Suffix = ".skf"
  }

  # This is a trick to enforce a Poisson hence bias potential
  # but performs a non-scc transport calculation (MaxIterations=1)
  Solver = GreensFunction{
    verbosity =31
    contourPoints = {0 0}
    realAxisPoints = 0
    EnclosedPoles = 0
  }
  #Solver = TransportOnly{}
}

Dephasing {
 # Elastic = Diagonal{
 #   Coupling [eV] = Constant{ 1.00 }
 #   MaxSCBAIterations = 5000
 #   SCBATolerance = 1e-7
 # }

 Inelastic = PolarOptical{
   Coupling [eV] = Constant { 1.0 }
   PhononFrequency [eV] = 0.05
   EpsInfinity = 1.0
   Eps0 = 3.0
   ScreeningLength = 10.0
   MaxSCBAIterations = 50
   SCBATolerance = 1e-6
   Tridiagonal = Yes
 }

}

Analysis = {
  #Compatible with coherent or elastic scattering
  #TunnelingAndDos{
  #  verbosity = 90
  #  EnergyRange [eV] = -9.00  -5.60
  #  EnergyStep [eV] = 0.02
  #  ComputeLDos = No 
    #NOTE: localDOS is computed only without dephasing.
    #      Possibly this can be adjusted as DOS goes with Gr which is computed
  #}
  #Compatible with inelastic scattering
  LayerCurrents {
    verbosity = 99
    EnergyRange [eV] = -6.60  -6.20
    EnergyStep [eV] = 0.01
  }
  #MeirWingreen{
  #  EnergyRange [eV] = -9.00  -5.60
  #  EnergyStep [eV] = 0.02
  #}
}

Options{
  #ReadChargesAsText = Yes
  WriteChargesAsText = Yes
  WriteAutotestTag = Yes
  WriteHS = Yes
}

ParserOptions = {
  ParserVersion = 10
}

Parallel = {
  Blacs{BlockSize=2}
  # Allow OMP threads explicitely to test for hybrid parallelisation with
  # MPI-binary. (Check the manual before using this in production runs!)
  UseOmpThreads = Yes
}
